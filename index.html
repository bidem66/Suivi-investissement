<!DOCTYPE html><html lang="fr"><head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Suivi investissement</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function (OneSignal) {
      await OneSignal.init({
        appId: "c5bd46ca-82c9-4493-b9a7-3813d3eccd03",
        safari_web_id: "web.onesignal.auto.21eb64f1-a307-4b53-9fa9-5af0b410a31b",
        notifyButton: {
          enable: true,
        },
        subdomainName: "pushbidm",
      });
    });
  </script>
</head><body class="bg-gray-50 text-gray-900">
  <div class="max-w-4xl mx-auto p-4">
    <h1 class="text-2xl font-bold mb-4">Suivi investissement</h1>
    <button onclick="refreshData()" class="mb-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded">Actualiser les données</button><section id="resume-global"></section>
<section id="tableau-crypto"></section>
<section id="tableau-actions"></section>

<script>
  const data = {
    resume: {
      investi: 1163.00,
      valeurActuelle: 1146.09,
      gain: -16.91,
      gainPct: -1.45
    },
    cryptos: [
      { nom: "SOLANA", quantite: 0.988, investi: 180, prixUnitaire: "186.24 CAD", valeur: 184.01 },
      { nom: "CHAINLINK", quantite: 4.94, investi: 90, prixUnitaire: "17.32 CAD", valeur: 85.56 },
      { nom: "CARDANO", quantite: 89.62, investi: 75, prixUnitaire: "0.8531 CAD", valeur: 76.46 },
      { nom: "POLKADOT", quantite: 13.37, investi: 65, prixUnitaire: "5.03 CAD", valeur: 67.25 },
      { nom: "AVALANCHE", quantite: 1.7365, investi: 45, prixUnitaire: "26.39 CAD", valeur: 45.83 },
      { nom: "PEPE", quantite: 2892752.9, investi: 30, prixUnitaire: "0.0000 CAD", valeur: 28.99 },
      { nom: "ETHEREUM (USD)", quantite: 0.043058, investi: 96.65, prixUnitaire: "1582.33 USD", valeur: 68.13 }
    ],
    actions: [
      { nom: "NVDA", quantite: 0.777, investi: 88.46, prixUnitaire: "113.83 USD", valeur: 81.65 },
      { nom: "GLD", quantite: 0.202, investi: 59.99, prixUnitaire: "297.00 USD", valeur: 60.60 },
      { nom: "STLA", quantite: 7, investi: 63.56, prixUnitaire: "9.51 USD", valeur: 66.57 },
      { nom: "CRM", quantite: 0.658, investi: 82.01, prixUnitaire: "124.6 USD", valeur: 80.15 },
      { nom: "TSLA", quantite: 0.419, investi: 101.84, prixUnitaire: "243.0 USD", valeur: 99.42 },
      { nom: "SLV", quantite: 1, investi: 29.45, prixUnitaire: "29.45 USD", valeur: 30.10 }
    ]
  };

  function formatMontant(valeur) {
    return valeur.toFixed(2) + ' $';
  }

  function render() {
    const { resume, cryptos, actions } = data;

    const resumeHTML = `
      <h2 class="text-xl font-semibold mb-2">Résumé global</h2>
      <table class="table-auto w-full text-center border">
        <thead><tr class="bg-gray-200"><th>Total investi</th><th>Valeur actuelle</th><th>Gain / Perte $</th><th>Gain / Perte %</th></tr></thead>
        <tbody>
          <tr>
            <td>${formatMontant(resume.investi)}</td>
            <td>${formatMontant(resume.valeurActuelle)}</td>
            <td class="${resume.gain < 0 ? 'text-red-600' : 'text-green-600'}">${formatMontant(resume.gain)}</td>
            <td class="${resume.gainPct < 0 ? 'text-red-600' : 'text-green-600'}">${resume.gainPct.toFixed(2)} %</td>
          </tr>
        </tbody>
      </table>`;

    const tableauCrypto = cryptos.map(c => {
      const gain = c.valeur - c.investi;
      const gainPct = (gain / c.investi) * 100;
      return `<tr>
        <td>${c.nom}</td>
        <td>${c.quantite}</td>
        <td>${formatMontant(c.investi)}</td>
        <td>${c.prixUnitaire}</td>
        <td>${formatMontant(c.valeur)}</td>
        <td class="${gain < 0 ? 'text-red-600' : 'text-green-600'}">${formatMontant(gain)}</td>
        <td class="${gainPct < 0 ? 'text-red-600' : 'text-green-600'}">${gainPct.toFixed(2)} %</td>
      </tr>`;
    }).join('');

    const tableauActions = actions.map(a => {
      const gain = a.valeur - a.investi;
      const gainPct = (gain / a.investi) * 100;
      return `<tr>
        <td>${a.nom}</td>
        <td>${a.quantite}</td>
        <td>${formatMontant(a.investi)}</td>
        <td>${a.prixUnitaire}</td>
        <td>${formatMontant(a.valeur)}</td>
        <td class="${gain < 0 ? 'text-red-600' : 'text-green-600'}">${formatMontant(gain)}</td>
        <td class="${gainPct < 0 ? 'text-red-600' : 'text-green-600'}">${gainPct.toFixed(2)} %</td>
      </tr>`;
    }).join('');

    document.getElementById('resume-global').innerHTML = resumeHTML;
    document.getElementById('tableau-crypto').innerHTML = `
      <h2 class="text-xl font-semibold mt-6 mb-2">Portefeuille Crypto</h2>
      <table class="table-auto w-full text-center border">
        <thead><tr class="bg-gray-200"><th>Crypto</th><th>Quantité</th><th>Investi</th><th>Prix unitaire</th><th>Valeur actuelle</th><th>Gain $</th><th>Gain %</th></tr></thead>
        <tbody>${tableauCrypto}</tbody>
      </table>`;

    document.getElementById('tableau-actions').innerHTML = `
      <h2 class="text-xl font-semibold mt-6 mb-2">Portefeuille Actions & Métaux</h2>
      <table class="table-auto w-full text-center border">
        <thead><tr class="bg-gray-200"><th>Action</th><th>Quantité</th><th>Investi</th><th>Prix unitaire</th><th>Valeur actuelle</th><th>Gain $</th><th>Gain %</th></tr></thead>
        <tbody>${tableauActions}</tbody>
      </table>`;
  }

  function refreshData() {
    render();
  }

  setInterval(refreshData, 5 * 60 * 1000);
  render();
</script>

  </div>
</body></html>
