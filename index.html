<!DOCTYPE html><html lang="fr"><head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Suivi investissement</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function (OneSignal) {
      await OneSignal.init({
        appId: "c5bd46ca-82c9-4493-b9a7-3813d3eccd03",
        safari_web_id: "web.onesignal.auto.21eb64f1-a307-4b53-9fa9-5af0b410a31b",
        notifyButton: { enable: true },
        subdomainName: "pushbidm"
      });
    });
  </script>
  <style>
    table {
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }
    th, td {
      padding: 0.75rem;
    }
    tr:nth-child(even) {
      background-color: #f9fafb;
    }
    th {
      background-color: #e5e7eb;
      font-weight: 600;
    }
    .fl-arrow-up::before {
      content: "\2191 ";
      color: green;
    }
    .fl-arrow-down::before {
      content: "\2193 ";
      color: red;
    }
  </style>
</head><body class="bg-gray-50 text-gray-900">
  <div class="max-w-6xl mx-auto p-4">
    <h1 class="text-3xl font-bold mb-6 text-center">Suivi investissement</h1>
    <div class="flex justify-between items-center mb-4">
      <div id="maj-info" class="text-sm text-gray-500">Prochaine mise à jour automatique dans 5 min</div>
      <button onclick="refreshData(true)" class="px-6 py-2 bg-blue-600 text-white font-semibold rounded shadow hover:bg-blue-700">Actualiser maintenant</button>
    </div>
    <div id="alert-refresh" class="hidden mb-4 text-green-600 font-medium">Données mises à jour avec succès</div><section id="resume-global" class="mb-8"></section>
<section id="tableau-crypto" class="mb-8"></section>
<section id="tableau-actions" class="mb-8"></section>
<section id="opportunites"></section>

<script>
  function formatMontant(valeur) {
    return valeur.toFixed(2) + ' $';
  }

  function formatGainPct(valeur) {
    const arrow = valeur >= 0 ? 'fl-arrow-up' : 'fl-arrow-down';
    return `<span class="${arrow}">${Math.abs(valeur).toFixed(2)} %</span>`;
  }

  function refreshData(fromButton = false) {
    render();
    if (fromButton) {
      const alert = document.getElementById("alert-refresh");
      alert.classList.remove("hidden");
      setTimeout(() => alert.classList.add("hidden"), 2500);
    }
  }

  setInterval(() => refreshData(), 5 * 60 * 1000);

  function render() {
    const opportunitesHTML = [
      { nom: "TON", variation: "+21.3%", prevision: "prochaines heures", recommandation: "Acheter maintenant" },
      { nom: "WIF", variation: "+18.6%", prevision: "prochains jours", recommandation: "Surveiller" },
      { nom: "ARB", variation: "+20.1%", prevision: "6 heures", recommandation: "Acheter maintenant" },
      { nom: "MATIC", variation: "+17.5%", prevision: "demain", recommandation: "Surveiller" },
      { nom: "RNDR", variation: "+22.7%", prevision: "2 heures", recommandation: "Acheter maintenant" }
    ].map(o => `
      <tr>
        <td>${o.nom}</td>
        <td>${o.variation}</td>
        <td>${o.prevision}</td>
        <td class="${o.recommandation === 'Acheter maintenant' ? 'text-green-600' : 'text-yellow-600'}">${o.recommandation}</td>
      </tr>`).join('');

    document.getElementById('opportunites').innerHTML = `
      <h2 class="text-xl font-semibold mt-6 mb-2">Opportunités du moment</h2>
      <table class="table-auto w-full text-center border">
        <thead><tr class="bg-gray-200">
          <th>Actif</th><th>Variation</th><th>Prévision</th><th>Recommandation</th>
        </tr></thead>
        <tbody>${opportunitesHTML}</tbody>
      </table>`;
  }

  render();
</script>

  </div>
</body>
</html>
